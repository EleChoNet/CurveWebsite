<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="styles/style.css" />
    <link rel="stylesheet" type="text/css" href="styles/top.css" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta charset="utf-8" />
    <title>Minecraft Curve服务器官方网站qwq</title>
    <script src="js/marked.js"></script>
    <script src="/js/vue.min.js"></script>
    <script src="/js/jquery.min.js"></script>
  </head>

  <body>
    <div class="top">
      <ul>
        <li>
          <a style="padding: 0" href="http://cm.vertexstudio.xyz">
            <div class="logo-box">
              <img class="logo" src="/images/logo.png" alt="" srcset="" />
            </div>
          </a>
        </li>
        <li><a href="https://vertexstudio.xyz">主站</a></li>
        <li><a href="downloads/index.html">下载</a></li>
      </ul>
    </div>

    <div id="main_form">
      <div id="Welcome">
        <p style="font-size: 3.7vw">保持热情，坚守初心</p>
        <p style="font-size: 1.8vw">我们期望向您展示更多</p>
        <button class="ok_button">好耶！</button>
      </div>
      <div id="side_status_div" class="surface">
        <div id="server_run">
          <p class="server_status" id="run_ok" v-if="running">服务器运行中</p>
          <p class="server_status" id="run_fail" v-else>服务器挂了</p>
        </div>
        <div id="server_info">
          <p class="server_status" style="font-size: 2vw">
            地图名称:{{world_name}}
          </p>
          <p class="server_status" style="font-size: 2vw">
            人数:{{nowplayer}}/{{maxplayer}}
          </p>
          <p class="server_status" style="font-size: 2vw">版本:{{version}}</p>
        </div>
      </div>
    </div>
    <div class="content" style="display: none;"></div>
    <a href="minecraft://?addExternalSever=chonet.top:11264">现在尝试</a>
    <script>
      var app = new Vue({
        el: "#side_status_div",
        data: {
          running: false,
          version: "loading",
          world_name: "loading",
          nowplayer: "loading",
          maxplayer: "loading",
        },
      });
      var service_status;
      function update(status, app) {
        var Requests_link =
          "http://chonet.top:3001/ServerStatus?OutFormat=json";

        $.get(Requests_link, (data, textStatus) => {
          app.running = true;
          status = JSON.parse(data);
          app.version = status.Version;
          app.maxplayer = status.MaxPlayers;
          app.nowplayer = status.NowPlayers;
          app.world_name = status.WorldName;
          app.introduction = status.ServerName;
        });
      }
      $(document).ready(() => {
        $.get("http://chonet.top:8848/gitcdn/cm.vertexstudio.xyz-gh-pages/texts/Curve.md",(data, textStatus)=>{
          md_text=data
          console.log(md_text)
          $(".content").html(
          marked(md_text)
        );
        });
        update(service_status, app);
        setInterval(() => update(service_status, app), 10000);
      });
      $(".ok_button").on("click",()=>{
        $(".content").css("display","block")
      })
    </script>
  </body>
</html>
